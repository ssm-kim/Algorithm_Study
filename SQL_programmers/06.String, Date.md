## STRING, DATE ORACLE 풀이 (solve 10 problems separate them)

##### 공통 링크 - https://school.programmers.co.kr/learn/courses/30/parts/17047

<br/>

- 자동차 대여 기록에서 장기/단기 대여 구분하기
  - 한 가지 유의할 점은 오늘 대여하고 오늘 반납해도 대여 기간은 하루이기 때문에 +1 추가

```SQL
SELECT HISTORY_ID, CAR_ID, TO_CHAR(START_DATE, 'YYYY-MM-DD') START_DATE, TO_CHAR(END_DATE, 'YYYY-MM-DD') END_DATE,
        CASE WHEN END_DATE - START_DATE + 1 >= 30
                THEN '장기 대여'
                ELSE '단기 대여'
                END RENT_TYPE
FROM CAR_RENTAL_COMPANY_RENTAL_HISTORY
WHERE TO_CHAR(START_DATE, 'YYYYMM') = '202209'
ORDER BY HISTORY_ID DESC
```

<br/>

- 특정 옵션이 포함된 자동차 리스트 구하기

```SQL
SELECT *
FROM CAR_RENTAL_COMPANY_CAR
WHERE OPTIONS LIKE '%네비게이션%'
ORDER BY CAR_ID DESC
```

<br/>

- 조회수가 가장 많은 중고거래 게시판의 첨부파일 조회하기
  - 테이블에서 조회수가 가장 높은 중고거래 게시물에 대한 첨부파일 경로를 조회

```SQL
SELECT '/home/grep/src/' || B.BOARD_ID ||'/'|| B.FILE_ID || B.FILE_NAME || FILE_EXT FILE_PATH
FROM USED_GOODS_BOARD A INNER JOIN USED_GOODS_FILE B ON A.BOARD_ID = B.BOARD_ID
WHERE A.VIEWS = (SELECT MAX(VIEWS)
                 FROM USED_GOODS_BOARD)
ORDER BY B.FILE_ID DESC
```

<br/>

- 조건에 맞는 사용자 정보 조회하기
  - 중고 거래 게시물을 3건 이상 등록한 사용자의 사용자 ID, 닉네임, 전체주소, 전화번호를 조회하는 SQL문을 작성

```SQL
SELECT B.USER_ID, B.NICKNAME, B.CITY ||' '|| B.STREET_ADDRESS1 ||' '|| B.STREET_ADDRESS2 전체주소,
        SUBSTR(B.TLNO, 0, 3)||'-'||SUBSTR(B.TLNO, 4, 4)||'-'||SUBSTR(B.TLNO, 8, 4) 전화번호
FROM USED_GOODS_BOARD A INNER JOIN USED_GOODS_USER B ON A.WRITER_ID = B.USER_ID
GROUP BY B.USER_ID, B.NICKNAME, B.CITY ||' '||B.STREET_ADDRESS1 ||' '|| B.STREET_ADDRESS2, B.TLNO
HAVING COUNT(USER_ID) >= 3
ORDER BY B.USER_ID DESC
```

<br/>

- 자동차 대여 기록 별 대여 금액 구하기
  - 대기

```SQL

```

<br/>

- 조건에 부합하는 중고거래 상태 조회하기

```SQL
SELECT BOARD_ID, WRITER_ID, TITLE, PRICE, CASE WHEN STATUS = 'SALE'
                                                THEN '판매중'
                                               WHEN STATUS = 'RESERVED'
                                                THEN '예약중'
                                               ELSE '거래완료'
                                               END STATUS
FROM USED_GOODS_BOARD
WHERE TO_CHAR(CREATED_DATE, 'YYYYMMDD') = '20221005'
ORDER BY BOARD_ID DESC

```

<br/>

- 조건별로 분류하여 주문상태 출력하기

```SQL
SELECT ORDER_ID, PRODUCT_ID, TO_CHAR(OUT_DATE, 'YYYY-MM-DD'),
                                            CASE WHEN TO_CHAR(OUT_DATE, 'MMDD') <= '0501'
                                                    THEN '출고완료'
                                                 WHEN TO_CHAR(OUT_DATE, 'MMDD') > '0501'
                                                    THEN '출고대기'
                                                 ELSE '출고미정'
                                            END 출고여부
FROM FOOD_ORDER
ORDER BY ORDER_ID AS
```

<br/>

- 대여 기록이 존재하는 자동차 리스트 구하기

```SQL
SELECT DISTINCT A.CAR_ID
FROM CAR_RENTAL_COMPANY_CAR A LEFT JOIN CAR_RENTAL_COMPANY_RENTAL_HISTORY B ON A.CAR_ID = B.CAR_ID
WHERE TO_CHAR(B.START_DATE, 'MM') = '10'
    AND A.CAR_TYPE = '세단'
ORDER BY A.CAR_ID DESC
```

<br/>

- 자동차 평균 대여 기간 구하기

```SQL
SELECT CAR_ID, ROUND(AVG((END_DATE-START_DATE)+1), 1) AVERAGE_DURATION
FROM CAR_RENTAL_COMPANY_RENTAL_HISTORY
GROUP BY CAR_ID
HAVING ROUND(AVG((END_DATE-START_DATE)+1), 1) >= 7
ORDER BY AVERAGE_DURATION DESC, CAR_ID DESC
```

<br/>

- 취소되지 않은 진료 예약 조회하기

```SQL

```

<br/>

---

<br/>

- 루시와 엘라 찾기

```SQL

```

<br/>

- 이름에 el이 들어가는 동물 찾기

```SQL

```

<br/>

- 중성화 여부 파악하기

```SQL

```

<br/>

- 오랜 기간 보호한 동물(2)

```SQL

```

<br/>

- DATETIME에서 DATE로 형 변환

```SQL

```

<br/>

- 카테고리 별 상품 개수 구하기

```SQL

```

<br/>
